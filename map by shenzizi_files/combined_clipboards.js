function ModalShare(t){this.config=t,t&&this.init()}var jQueryHtmlSortable=function(t){function e(o){if(i[o])return i[o].exports;var n=i[o]={exports:{},id:o,loaded:!1};return t[o].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var o,n,r;!function(s,a){n=[i(1)],o=a,r="function"==typeof o?o.apply(e,n):o,!(void 0!==r&&(t.exports=r))}(this,function(t){"use strict";var e,i,o,n,r,s,a=[],l=!1,d=!1,c=t(),h=[],p=function(t){t.off("dragstart.h5s"),t.off("dragend.h5s"),t.off("selectstart.h5s"),t.off("dragover.h5s"),t.off("dragenter.h5s"),t.off("drop.h5s")},u=function(t){t.off("dragover.h5s"),t.off("dragenter.h5s"),t.off("drop.h5s")},f=function(t,e){t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text",""),t.dataTransfer.setDragImage&&t.dataTransfer.setDragImage(e.item,e.x,e.y)},b=function(t,e){return e.x||(e.x=parseInt(t.pageX-e.draggedItem.offset().left)),e.y||(e.y=parseInt(t.pageY-e.draggedItem.offset().top)),e},m=function(t){return{item:t[0],draggedItem:t}},g=function(t,e){var i=m(e);i=b(t,i),f(t,i)},$=function(e,i){var o=[];if(e&&(e.is("."+i)||e.has("."+i).length>0?(o=n.find("."+i).closest("li").map(function(){return{item:t(this),prev:t(this).prev(),index:t(this).index()}}).get(),d=!0):(o.push({item:e.closest("li"),prev:e.prev(),index:e.index()}),d=!1)),0===o.length)throw new Error("No item getting dragged");return o},y=function(e){for(var i=0;i<e.length;i++)t(e[i].item).hide(),t(e[i].item).appendTo(n);l=!0},v=function(){e=null,i=null,o=null,n=null,r=null,a=[],d=!1,l=!1},w=function(t,e){return"undefined"==typeof t?e:t},C=function(t){t.removeData("opts"),t.removeData("connectWith"),t.removeData("items"),t.removeAttr("aria-dropeffect")},_=function(t){t.removeAttr("aria-grabbed"),t.removeAttr("draggable"),t.removeAttr("role")},S=function(t,e){return t[0]===e[0]||void 0!==t.data("connectWith")&&t.data("connectWith")===e.data("connectWith")},k=function(t){var e=t.data("opts")||{},i=t.children(e.items),o=e.handle?i.find(e.handle):i;u(t),C(t),o.off("mousedown.h5s"),p(i),_(i)},E=function(e){var i=e.data("opts"),o=e.children(i.items),n=i.handle?o.find(i.handle):o;e.attr("aria-dropeffect","move"),n.attr("draggable","true"),"function"!=typeof document.createElement("span").dragDrop||i.disableIEFix||n.on("mousedown.h5s",function(){o.index(this)!==-1?this.dragDrop():t(this).parents(i.items)[0].dragDrop()})},x=function(t){var e=t.data("opts"),i=t.children(e.items),o=e.handle?i.find(e.handle):i;t.attr("aria-dropeffect","none"),o.attr("draggable",!1),o.off("mousedown.h5s")},T=function(t){var e=t.data("opts"),i=t.children(e.items),o=e.handle?i.find(e.handle):i;p(i),o.off("mousedown.h5s"),u(t)},I=function(p,u){var f=t(p),b=String(u);return u=t.extend({connectWith:!1,placeholder:null,dragImage:null,disableIEFix:!1,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging"},u),f.each(function(){var p=t(this);if(/enable|disable|destroy/.test(b))return void I[b](p);u=w(p.data("opts"),u),p.data("opts",u),T(p);var f,m,C,_=p.children(u.items),k=null===u.placeholder?t("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="'+u.placeholderClass+'"/>'):t(u.placeholder).addClass(u.placeholderClass);if(!p.attr("data-sortable-id")){var x=h.length;h[x]=p,p.attr("data-sortable-id",x),_.attr("data-item-sortable-id",x)}p.data("items",u.items),c=c.add(k),u.connectWith&&p.data("connectWith",u.connectWith),E(p),_.attr("role","option"),_.attr("aria-grabbed","false"),_.on("dragstart.h5s",function(l){l.stopImmediatePropagation(),e=t(this),e.addClass(u.draggingClass),e.attr("aria-grabbed","true"),o=e.index(),n=e.parent(),r=e.prev(),a=$(e,"selected"),e.parent().triggerHandler("beforeghost",{item:e,numSelected:a.length,bulk:d}),g(l.originalEvent,t(this)),s=!1,f=e.index(),i=e.height(),m=t(this).parent(),e.parent().triggerHandler("sortstart",{item:e,placeholder:k,startparent:m})}),_.on("dragend.h5s",function(){var i;if(e){if(s)for(t(a[0].item).insertBefore(e),i=1;i<a.length;i++)t(a[i].item).insertAfter(t(a[i-1].item));else for(0===a[0].index?n.prepend(a[0].item):t(a[0].item).insertAfter(t(a[0].prev)),i=1;i<a.length;i++)t(a[i].item).insertAfter(a[i].prev);for(e.removeClass(u.draggingClass),e.attr("aria-grabbed","false"),i=0;i<a.length;i++)t(a[i].item).show();c.detach(),C=t(this).parent(),e.parent().triggerHandler("sortstop",{item:e,bulk:d,startparent:m}),f===e.index()&&m.get(0)===C.get(0)||e.parent().triggerHandler("sortupdate",{item:e,items:a,isBulk:d,index:C.children(C.data("items")).index(e),oldindex:_.index(e),elementIndex:e.index(),oldElementIndex:f,startparent:m,endparent:C}),v()}}),t(this).add([k]).on("drop.h5s",function(i){if(S(p,t(e).parent()))return i.stopPropagation(),c.filter(":visible").after(e),s=!0,e.trigger("dragend.h5s"),!1}),_.add([this,k]).on("dragover.h5s dragenter.h5s",function(o){if(S(p,t(e).parent())){if(o.preventDefault(),o.originalEvent.dataTransfer.dropEffect="move",_.is(this)){var n=t(this).height();if(u.forcePlaceholderSize&&k.height(i),n>i){var r=n-i,s=t(this).offset().top;if(k.index()<t(this).index()&&o.originalEvent.pageY<s+r)return!1;if(k.index()>t(this).index()&&o.originalEvent.pageY>s+n-r)return!1}l||y(a),k.index()<t(this).index()?t(this).after(k):t(this).before(k),c.not(k).detach()}else c.is(this)||t(this).children(u.items).length||(c.detach(),t(this).append(k));return!1}})})};return I.destroy=function(t){k(t)},I.enable=function(t){E(t)},I.disable=function(t){x(t)},t.fn.sortable=function(t){return I(this,t)},I})},function(t,e){t.exports=jQuery}]);!function(){"use strict";function t(o){if(!o)throw new Error("No options passed to Waypoint constructor");if(!o.element)throw new Error("No element option passed to Waypoint constructor");if(!o.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=t.Adapter.extend({},t.defaults,o),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=o.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,e+=1}var e=0,i={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var o in i)e.push(i[o]);for(var n=0,r=e.length;n<r;n++)e[n][t]()},t.destroyAll=function(){t.invokeAll("destroy")},t.disableAll=function(){t.invokeAll("disable")},t.enableAll=function(){t.invokeAll("enable")},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},t.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){"use strict";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=n.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,o[t.waypointContextKey]=this,i+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var i=0,o={},n=window.Waypoint,r=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?"horizontal":"vertical";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical);t&&e&&(this.adapter.off(".waypoints"),delete o[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,n.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on("scroll.waypoints",function(){e.didScroll&&!n.isTouch||(e.didScroll=!0,n.requestAnimationFrame(t))})},e.prototype.handleResize=function(){n.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var i in e){var o=e[i],n=o.newScroll>o.oldScroll,r=n?o.forward:o.backward;for(var s in this.waypoints[i]){var a=this.waypoints[i][s],l=o.oldScroll<a.triggerPoint,d=o.newScroll>=a.triggerPoint,c=l&&d,h=!l&&!d;(c||h)&&(a.queueTrigger(r),t[a.group.id]=a.group)}}for(var p in t)t[p].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?n.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?n.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var i in this.waypoints[e])t.push(this.waypoints[e][i]);for(var o=0,n=t.length;o<n;o++)t[o].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,i=this.adapter.offset(),o={};this.handleScroll(),t={horizontal:{contextOffset:e?0:i.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:e?0:i.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var n in t){var r=t[n];for(var s in this.waypoints[n]){var a,l,d,c,h,p=this.waypoints[n][s],u=p.options.offset,f=p.triggerPoint,b=0,m=null==f;p.element!==p.element.window&&(b=p.adapter.offset()[r.offsetProp]),"function"==typeof u?u=u.apply(p):"string"==typeof u&&(u=parseFloat(u),p.options.offset.indexOf("%")>-1&&(u=Math.ceil(r.contextDimension*u/100))),a=r.contextScroll-r.contextOffset,p.triggerPoint=b+a-u,l=f<r.oldScroll,d=p.triggerPoint>=r.oldScroll,c=l&&d,h=!l&&!d,!m&&c?(p.queueTrigger(r.backward),o[p.group.id]=p.group):!m&&h?(p.queueTrigger(r.forward),o[p.group.id]=p.group):m&&r.oldScroll>=p.triggerPoint&&(p.queueTrigger(r.forward),o[p.group.id]=p.group)}}for(var g in o)o[g].flushTriggers();return this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in o)o[t].refresh()},e.findByElement=function(t){return o[t.waypointContextKey]},window.onload=function(){r&&r(),e.refreshAll()},n.requestAnimationFrame=function(e){var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t;i.call(window,e)},n.Context=e}(),function(){"use strict";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function i(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),o[this.axis][this.name]=this}var o={vertical:{},horizontal:{}},n=window.Waypoint;i.prototype.add=function(t){this.waypoints.push(t)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var o=this.triggerQueues[i],n="up"===i||"left"===i;o.sort(n?e:t);for(var r=0,s=o.length;r<s;r+=1){var a=o[r];(a.options.continuous||r===o.length-1)&&a.trigger([i])}}this.clearTriggerQueues()},i.prototype.next=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints),o=i===this.waypoints.length-1;return o?null:this.waypoints[i+1]},i.prototype.previous=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints);return i?this.waypoints[i-1]:null},i.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},i.prototype.remove=function(t){var e=n.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(t){return o[t.axis][t.name]||new i(t)},n.Group=i}(),function(){"use strict";function t(t){this.$element=e(t)}var e=window.jQuery,i=window.Waypoint;e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,i){t.prototype[i]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[i].apply(this.$element,t)}}),e.each(["extend","inArray","isEmptyObject"],function(i,o){t[o]=e[o]}),i.adapters.push({name:"jquery",Adapter:t}),i.Adapter=t}(),function(){"use strict";function t(t){return function(){var i=[],o=arguments[0];return t.isFunction(arguments[0])&&(o=t.extend({},arguments[1]),o.handler=arguments[0]),this.each(function(){var n=t.extend({},o,{element:this});"string"==typeof n.context&&(n.context=t(this).closest(n.context)[0]),i.push(new e(n))}),i}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}(),Handlebars.registerPartial("svg-icon",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,o){var n,r=e.helperMissing,s="function",a=this.escapeExpression;return'<svg>\n  <use data-size="'+a((n=null!=(n=e.size||(null!=t?t.size:t))?n:r,typeof n===s?n.call(t,{name:"size",hash:{},data:o}):n))+'" xlink:href="#'+a((n=null!=(n=e.type||(null!=t?t.type:t))?n:r,typeof n===s?n.call(t,{name:"type",hash:{},data:o}):n))+'"></use>\n</svg>\n'},useData:!0})),Handlebars.registerPartial("clipboard-trio",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,o){var n,r=e.helperMissing,s="function",a=this.escapeExpression;return'<div class="container clearfix">\n  <div class="main left">\n    <a href="'+a((n=null!=(n=e.url||(null!=t?t.url:t))?n:r,typeof n===s?n.call(t,{name:"url",hash:{},data:o}):n))+'" class="main-image link-bg-img" data-original="'+a((n=null!=(n=e.mainImage||(null!=t?t.mainImage:t))?n:r,typeof n===s?n.call(t,{name:"mainImage",hash:{},data:o}):n))+'" alt="'+a((n=null!=(n=e.title||(null!=t?t.title:t))?n:r,typeof n===s?n.call(t,{name:"title",hash:{},data:o}):n))+'"/>\n  </div>\n  <div class="side">\n    <a href="'+a((n=null!=(n=e.url||(null!=t?t.url:t))?n:r,typeof n===s?n.call(t,{name:"url",hash:{},data:o}):n))+'" class="side-image link-bg-img" data-original="'+a((n=null!=(n=e.firstSideImage||(null!=t?t.firstSideImage:t))?n:r,typeof n===s?n.call(t,{name:"firstSideImage",hash:{},data:o}):n))+'" alt="'+a((n=null!=(n=e.title||(null!=t?t.title:t))?n:r,typeof n===s?n.call(t,{name:"title",hash:{},data:o}):n))+'"/>\n    <a href="'+a((n=null!=(n=e.url||(null!=t?t.url:t))?n:r,typeof n===s?n.call(t,{name:"url",hash:{},data:o}):n))+'" class="side-image link-bg-img" data-original="'+a((n=null!=(n=e.secSideImage||(null!=t?t.secSideImage:t))?n:r,typeof n===s?n.call(t,{name:"secSideImage",hash:{},data:o}):n))+'" alt="'+a((n=null!=(n=e.title||(null!=t?t.title:t))?n:r,typeof n===s?n.call(t,{name:"title",hash:{},data:o}):n))+'"/>\n  </div>\n</div>\n'},useData:!0})),slideshare_object.utils.exports("templates.clipping.clipboards-dropdown-list-item",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,o){var n,r,s=e.helperMissing,a="function",l=this.escapeExpression;return'<li class="j-clipboard j-clipboard-item">\n    <button>\n      <span class="title left"> '+l((r=null!=(r=e.title||(null!=t?t.title:t))?r:s,typeof r===a?r.call(t,{name:"title",hash:{},data:o}):r))+' </span>\n      <span class="svg-icon check right '+l((r=null!=(r=e.checkVisibility||(null!=t?t.checkVisibility:t))?r:s,typeof r===a?r.call(t,{name:"checkVisibility",hash:{},data:o}):r))+'">\n'+(null!=(n=this.invokePartial(i["svg-icon"],t,{name:"svg-icon",hash:{type:"check-icon",size:"small"},data:o,indent:"        ",helpers:e,partials:i}))?n:"")+"      </span>\n    </button>\n</li>\n"},usePartial:!0,useData:!0})),slideshare_object.utils.exports("templates.clipping.clipboard-item",Handlebars.template({1:function(t,e,i,o){var n,r,s=e.helperMissing,a=this.escapeExpression;return"          "+a((r=null!=(r=e.clipboard_clips_count||(null!=t?t.clipboard_clips_count:t))?r:s,"function"==typeof r?r.call(t,{name:"clipboard_clips_count",hash:{},data:o}):r))+" "+a((e.pluralize||t&&t.pluralize||s).call(t,null!=t?t.clipboard_clips_count:t,null!=(n=null!=(n=null!=(n=null!=t?t.i18n:t)?n.clipping:n)?n.clip:n)?n.singular:n,null!=(n=null!=(n=null!=(n=null!=t?t.i18n:t)?n.clipping:n)?n.clip:n)?n.plural:n,{name:"pluralize",hash:{},data:o}))+"\n"},3:function(t,e,i,o){var n;return"          "+this.escapeExpression(this.lambda(null!=(n=null!=(n=null!=(n=null!=t?t.i18n:t)?n.clipping:n)?n.clip_noun:n)?n.zero:n,t))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,o){var n,r,s=this.lambda,a=this.escapeExpression,l=e.helperMissing,d="function";return'<li id="clipboard-'+a(s(null!=(n=null!=t?t.clipboard:t)?n.id:n,t))+'-large"\n    class="j-clipboard-item"\n    translate="no"\n    data-id="'+a(s(null!=(n=null!=t?t.clipboard:t)?n.id:n,t))+'"\n    data-title="'+a(s(null!=(n=null!=t?t.clipboard:t)?n.title:n,t))+'"\n    data-description="'+a(s(null!=(n=null!=t?t.clipboard:t)?n.description:n,t))+'"\n    data-url="'+a((r=null!=(r=e.clipboard_url||(null!=t?t.clipboard_url:t))?r:l,typeof r===d?r.call(t,{name:"clipboard_url",hash:{},data:o}):r))+'"\n    data-image-url="'+a((r=null!=(r=e.clipboard_image_url||(null!=t?t.clipboard_image_url:t))?r:l,typeof r===d?r.call(t,{name:"clipboard_image_url",hash:{},data:o}):r))+'">\n  <div class="thumbnail">\n    <div class="details">\n      <div class="title">\n        '+a(s(null!=(n=null!=t?t.clipboard:t)?n.title:n,t))+'\n      </div>\n      <div class="count">\n'+(null!=(n=e["if"].call(t,null!=t?t.clipboard_clips_count:t,{name:"if",hash:{},fn:this.program(1,o,0),inverse:this.program(3,o,0),data:o}))?n:"")+'      </div>\n    </div>\n    <div class="overlay" data-clipboard-id="'+a(s(null!=(n=null!=t?t.clipboard:t)?n.id:n,t))+'">\n      <div class="pull-right">\n        <div class="actions">\n          <button class="j-share-clipboard-button button icon" title="'+a(s(null!=(n=null!=(n=null!=(n=null!=t?t.i18n:t)?n.clipping:n)?n.clipboard_overlay:n)?n.share:n,t))+'">\n            <i class="fa fa-fw fa-share"></i>\n          </button>\n          <button class="j-delete-clipboard-button button icon" title="'+a(s(null!=(n=null!=(n=null!=(n=null!=t?t.i18n:t)?n.clipping:n)?n.clipboard_overlay:n)?n["delete"]:n,t))+'">\n            <i class="fa fa-fw fa-trash-o"></i>\n          </button>\n        </div>\n      </div>\n      <a href="'+a((r=null!=(r=e.clipboard_url||(null!=t?t.clipboard_url:t))?r:l,typeof r===d?r.call(t,{name:"clipboard_url",hash:{},data:o}):r))+'" class="view-clipboard button button-transparent radius">'+a(s(null!=(n=null!=(n=null!=t?t.i18n:t)?n.views_cap:n)?n.one:n,t))+" "+a(s(null!=(n=null!=(n=null!=t?t.i18n:t)?n.clipping:n)?n.clipboard:n,t))+'</a>\n    </div>\n    <a href="'+a((r=null!=(r=e.clipboard_url||(null!=t?t.clipboard_url:t))?r:l,typeof r===d?r.call(t,{name:"clipboard_url",hash:{},data:o}):r))+'" class="j-lazy-img j-link-bg-img link-bg-img" data-original="'+a(s(null!=(n=null!=t?t.clipboard:t)?n.image_url:n,t))+'"></a>\n  </div>\n</li>\n'},useData:!0})),function(){ssClientUtils.dom.onContentLoaded.then(ssClientUtils.svg.loadSvgs)}(),function(t){var e=(window.encodeURIComponent,"LinkedIn"),i="Twitter",o="Facebook",n="GooglePlus",r="Pinterest",s={linkedin:e,twitter:i,facebook:o,googleplus:n,pinterest:r},a="https://www.linkedin.com/shareArticle",l="https://twitter.com/intent/tweet",d="https://www.facebook.com/sharer/sharer.php",c="https://plus.google.com/u/0/share",h="https://pinterest.com/pin/create/button/",p={SERVICE_LINKEDIN:e,SERVICE_TWITTER:i,SERVICE_FACEBOOK:o,SERVICE_GOOGLEPLUS:n,SERVICE_PINTEREST:r,getNormalizedServiceName:function(t){var e,i;if(!t)throw new Error("Undefined service name: "+t);return e=t.toLowerCase(),i=s[e],i&&(t=i),t},isSupportedService:function(t){return Object.keys(s).some(function(e){return s[e]===t})},generateLinkedInShareWindowUrl:function(t,e){var i={url:t};return e&&(e.title&&(i.title=e.title),e.description&&(i.summary=e.description)),a+"?"+$.param(i)},generateTwitterShareWindowUrl:function(t,e){var i={url:t};return e&&(e.description&&(i.text=e.description),e.via&&(i.via=e.via)),l+"?"+$.param(i)},generateFacebookShareWindowUrl:function(t){var e={u:t};return d+"?"+$.param(e)},generateGooglePlusShareWindowUrl:function(t){var e={url:t};return c+"?"+$.param(e)},generatePinterestShareWindowUrl:function(t,e){var i={url:t};return e&&(e.title&&(i.title=e.title),e.description&&(i.description=e.description),e.imageUrl&&(i.media=e.imageUrl)),h+"?"+$.param(i)},generateShareWindowUrl:function(t,e,i){var o="generate"+t+"ShareWindowUrl";return this[o](e,i)}};t.utils.exports("socialShareUtil",p)}(window.slideshare_object),function(t){var e,i=t.utils.imports("socialShareUtil"),o={strWindowFeatures:"width=550,height=380,scrollbars=yes,resizable=yes"};if(!i)throw new Error("SocialShareWindow dependency missing: SocialShareUtil");e=function(t){var t=$.extend({},o,t),e=t.url||window.location.href,n=i.getNormalizedServiceName(t.serviceType),r=t.title,s=t.description,a=t.imageUrl,l=t.strWindowFeatures,d=i.generateShareWindowUrl(n,e,{title:r,description:s,imageUrl:a});return{open:function(){if(!i.isSupportedService(n))throw new Error("Unsupported service: "+n);window.open(d,null,l)}}},t.utils.exports("SocialShareWindow",e)}(window.slideshare_object),function(t){function e(t){this.config=$.extend({},l,t),this.shareEntity=this.config.shareEntity,this.shareEntityType=this.config.shareEntityType,this.onClose=this.config.onClose,this.shareTypes=[],this._init()}var i=t.utils.imports("SocialShareWindow"),o=t.utils.imports("socialShareUtil"),n={email:"email",facebook:"facebook",twitter:"twitter",linkedin:"linkedin",googleplus:"googleplus"},r="clipboard",s="clip",a={clipShared:"clip:shared",clipboardShared:"clipboard:shared",beforeModalOpen:"open.fndtn.reveal",afterModalOpen:"opened.fndtn.reveal",afterModalClose:"closed.fndtn.reveal"},l={shareEntity:{},shareEntityType:r,onClose:$.noop},d={modalTitle:".j-modal-title",shareLinkInput:".j-share-link-url",socialNetworkList:".j-share-social-list",emailShareForm:".j-share-email-form",shareEmailSend:"#share-email-send",shareEmailForm:".j-share-email-form",shareEmailTo:".j-share-email-to",shareEmailName:".j-share-email-name",shareEmailMessage:".j-share-email-msg",shareEmailClear:".j-email-clear",shareEmailSent:".j-email-sent",shareEmailFlash:".j-email-flash"};e.prototype._init=function(){if(this.$el=$(this.config.el),this.$shareLinkInput=this.$el.find(d.shareLinkInput),this.$shareEmailSend=this.$el.find(d.shareEmailSend),this.$shareEmailForm=this.$el.find(d.shareEmailForm),this.$modalTitle=this.$el.find(d.modalTitle),!this.$el.length||$.isEmptyObject(this.shareEntity))throw new Error("Error initializing ShareModal");if(!i)throw new Error("ClipboardModalShare dependency missing: SocialShareWindow");this.gaTrackCategory=this.$el.data("ga-track-category"),this.gaTrackAction=this.$el.data("ga-track-action"),this._updateView(),this._attachEventListeners()},e.prototype._updateView=function(){var e=this.config.modalTitle;e&&this.$modalTitle.text(e),this.$shareLinkInput.val(this.shareEntity.url),t&&t.utils.isUserAuthenticated()&&this.$el.find(d.shareEmailName).val(t.user.login)},e.prototype._attachEventListeners=function(){this.$el.on(a.afterModalClose,this._onClosed.bind(this)),this.$el.on("click",d.socialNetworkList,this._onSocialNetworkClick.bind(this)),this.$el.on("click",d.shareLinkInput,function(t){$(t.target).select()}),this.$el.on("submit",d.emailShareForm,this._onEmailShareSubmit.bind(this))},e.prototype._detachEventListeners=function(){this.$el.off()},e.prototype._onSocialNetworkClick=function(t){var e,a,l,d,c=$(t.target),h=c.data("network"),p="Make your own by #clipping the best @SlideShare slides.",u="Share your own by #clipping the best @SlideShare slides.";h&&(this.shareTypes.push(n[h]),a={url:this.shareEntity.url,serviceType:h},o.getNormalizedServiceName(h)==o.SERVICE_TWITTER&&(this.shareEntityType===r?l="See "+this.shareEntityType+' "'+this.shareEntity.title+'". '+p:this.shareEntityType===s?(e=this.shareEntity.description.charAt(0).toLowerCase()+this.shareEntity.description.slice(1),l="See "+e+". "+u):l=p,a.description=l),d=new i(a),d.open())},e.prototype._clearEmailErrorAlerts=function(){this.$el.find(".error").removeClass("error")},e.prototype._clearEmailFields=function(){this.$el.find(d.shareEmailClear).val(""),this.$shareEmailSend.prop("disabled",!1),this._clearEmailErrorAlerts()},e.prototype._onEmailShareSubmit=function(t){t.preventDefault();var e=this,i=this.$el.find(d.shareEmailTo).val(),o=this.$el.find(d.shareEmailName).val(),r=this.$el.find(d.shareEmailMessage).val(),s=!1;e.$shareEmailSend.val("Sending").addClass("sending").prop("disabled",!0),e._clearEmailErrorAlerts(),s||(s=!0,$.ajax({url:"/clipboards/email_share",type:"POST",dataType:"json",data:{id:this.shareEntity.id,name:o,recipients:i,message:r,entity:this.shareEntityType},success:function(t){if(0===t.response_code)e.shareTypes.push(n.email),e._clearEmailFields(),e.$shareEmailForm.slideUp(400),e.$el.find(d.shareEmailSent).slideDown(400),setTimeout(function(){e.$el.find(d.shareEmailSent).slideUp(400),e.$shareEmailForm.slideDown(400)},2e3);else{var i=e.$el.find(d.shareEmailFlash);switch(i.text(t.response).show(),t.response_code){case 1:e.$el.find(d.shareEmailTo).addClass("error");break;case 2:e.$el.find(d.shareEmailName).addClass("error")}setTimeout(function(){i.fadeOut(400)},5e3)}},complete:function(){s=!1,e.$shareEmailSend.val("Send").removeClass("sending").prop("disabled",!1)}}))},e.prototype._onClosed=function(){this._detachEventListeners(),this._trackEvents(),this.onClose({shareEntity:this.shareEntity,shareEntityType:this.shareEntityType,shareTypes:this.shareTypes})},e.prototype._trackEvents=function(){var t,e;this.shareEntityType===s?(t=a.clipShared,e={clip:this.shareEntity}):this.shareEntityType===r&&(t=a.clipboardShared,e={clipboard:this.shareEntity}),t&&e&&this.shareTypes.forEach(function(i){$(document).trigger(t,$.extend(e,{shareType:i}))})},e.prototype.close=function(){this.$el.foundation("reveal","close")},e.prototype.open=function(){this.$el.foundation("reveal","open"),this.shareTypes=[]},t.utils.exports("ClipboardModalShare",e)}(window.slideshare_object),function(t,e){var i=t.utils,o={onClose:e.noop,onHide:e.noop},n={close:".close"},r="notice-prompt",s=function(t){return t.toString()+"px"},a=function(t){var i;return this.config=e.extend(o,t),this.$el=e(this.config.selector||n.container),(i=this._getInstance(this.$el))?i:void this._init()};a.prototype={constructor:a,_getInstance:function(t){return t.data(r)},_init:function(){this.$el.data(r,this),this.timeouts={hide:null},this.$close=e(n.close),this._attachEventListeners()},_attachEventListeners:function(){this.$el.on("click",n.close,function(){this.hide(),this.config.onClose.call()}.bind(this))},show:function(){var t=this.$el;1!==t.css("opacity")&&(t.css("opacity",0).removeClass("hide").addClass("show").css("right","-"+s(this.width())),t.animate({right:"+="+this.width(),opacity:1}))},hide:function(){this.$el.animate({right:"-"+this.width(),opacity:0},function(){this.$el.removeClass("show").addClass("hide")}.bind(this)),this.config.onHide.call()},width:function(){return this.width=this.width||this.$el.width(),this.width}},i.exports("NoticePrompt",a)}(window.slideshare_object,jQuery),function(t,e){var i=t.utils,o={enter:13},n={selector:"textarea",autoResize:!0,setCursor:!0,saveOnBlur:!0,saveOnEnter:!0,onSave:e.noop};DynamicTextarea=function(t){this.config=e.extend({},n,t),this._init()},DynamicTextarea.prototype._init=function(){if(this.$el=e(this.config.selector),!this.$el.length)throw new Error("Error initializing DynamicTextarea");this._attachEventListeners()},DynamicTextarea.prototype._attachEventListeners=function(){this.config.autoResize&&this.$el.on("input",this.setHeight.bind(this)),this.config.setCursor&&this.$el.on("focus",this.setCursorAtEnd.bind(this)),this.config.saveOnBlur&&this.$el.on("blur",this.config.onSave),this.config.saveOnEnter&&this.$el.on("keypress",function(t){t.which===o.enter&&(t.preventDefault(),this.$el.blur())}.bind(this))},DynamicTextarea.prototype.setHeight=function(){this.$el.height(0).height(this.$el[0].scrollHeight)},DynamicTextarea.prototype.setCursorAtEnd=function(){var t=this.$el.val().length,e=this.$el.get(0);e.setSelectionRange&&e.setSelectionRange(t,t)},i.exports("DynamicTextarea",DynamicTextarea)}(window.slideshare_object,jQuery),function(t){function e(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),t.prototype["super"]=function(){e.apply(this,arguments)}}Handlebars.registerHelper("pluralize",function(t,e,i){return 1===t?e:i}),t.Clipboards={},t.Clipboards.config={},t.Clipboards.inherits=e}(window.slideshare_object),function(t){var e={"delete":"fa-thrash-o",pending:"fa-spin fa-spinner",copy:"fa-files-o"},i={svgButton:"svg-button"};t.actionBarMixin=function(){this.icons=e,this.toggleButtonIcon=function(t,e,i){t.find("i").toggleClass(e,i)},this.setButtonPending=function(t,o){t.hasClass(i.svgButton)?(t.find("svg").hide(),t.find("i").show()):(this.toggleButtonIcon(t,e[o],!1),this.toggleButtonIcon(t,e.pending,!0))},this.clearButtonPending=function(t,o){t.hasClass(i.svgButton)?(t.find("i").hide(),t.find("svg").show()):(this.toggleButtonIcon(t,e.pending,!1),this.toggleButtonIcon(t,e[o],!0))}}}(slideshare_object.Clipboards),function(t){t.overlayMixin=function(){this.attachOverlayEvents=function(t){t=t||$(".overlay"),t.hover(function(){$(this).addClass("sortable-over")},function(){$(this).removeClass("sortable-over")})}}}(slideshare_object.Clipboards),function(t){function e(){}var i=t.slideshare_object.utils,o="POST",n="GET",r="PUT",s="DELETE";e.prototype.addAnnotation=function(t,e,i){return this._ajax("/clipboards/"+t+"/clips/"+e+"/add_annotation",o,{annotation:i})},e.prototype.addClipToClipboard=function(t,e){return this._ajax("/clipboards/"+t+"/clips",o,e)},e.prototype.addClips=function(t,e){return this._ajax("/clipboards/"+t+"/clips/bulk",o,{ids:e})},e.prototype.reclipClips=function(t,e,i){return this._ajax("/clipboards/"+t+"/clips/bulk_reclip",o,{source_clipboard_id:e,ids:i})},e.prototype.clipboards=function(){return this._ajax("/clipboards",n)},e.prototype.createClipboard=function(t){return this._ajax("/clipboards",o,t)},e.prototype.deleteClip=function(t){return this._ajax("/clips/"+t,s)},e.prototype.deleteClipFromClipboard=function(t,e){return this._ajax("/clipboards/"+t+"/clips/"+e,s)},e.prototype.deleteClipsFromClipboard=function(t,e){return this._ajax("/clipboards/"+t+"/clips/bulk",s,{ids:e})},e.prototype.deleteClipboard=function(t){return this._ajax("/clipboards/"+t,s)},e.prototype.editClipboard=function(t,e){return this._ajax("/clipboards/"+t,r,e);
},e.prototype.reorderClips=function(t,e){return this._ajax("/clipboards/"+t+"/clips/reorder",o,{clips_order:e})},e.prototype.topClipboards=function(t,e){return this._ajax("/clipboards/top",n,{slideshow_id:t,position:e})},e.prototype._ajax=function(t,e,i){return $.ajax({url:t,type:e,dataType:"json",contentType:"application/json",data:e===n?i:JSON.stringify(i)})},i.exports("clips.api",new e)}(window),function(t){function e(t,e,i){var o=s(e).data(f.clipboard),n=s(i).data(f.clipboard),r=o.title.toLowerCase(),a=n.title.toLowerCase(),l=r.indexOf(t),d=a.indexOf(t);return l!==d?l-d:r<a?-1:r>a?1:0}function i(t,e){return e=e||t.title}function o(t,e){var o=t.title,n=o.toLowerCase().indexOf(e),r=o.substring(0,n),a=o.substring(n,n+e.length),l=o.substring(n+e.length),d=s("<span>").addClass(c.searchHighlight).text(a);return i(t,r+d.get(0).outerHTML+l)}function n(){this._$events=s({}),this.api=l.imports("clips.api"),this.$el=s(p.dropdown),this.$clipboardList=this.$el.find(p.clipboardList),this.$searchInput=this.$el.find(p.searchInput),this.$createNew=this.$el.find(p.createNew),this.$createFormWrapper=this.$el.find(p.createFormWrapper),this.$createForm=this.$createFormWrapper.find(p.createForm),this.$createFormInput=this.$createFormWrapper.find(p.createFormInput),this.$createFormError=this.$createFormWrapper.find(p.createFormError),this.itemTemplate=l.imports(u.listItem),this.attachEventListeners()}var r=4,s=t.$,a=t.slideshare_object,l=a.utils,d=!!s.fn.foundation,c=(t.jSecure,{clipboardItem:"j-clipboard j-clipboard-item",searchHighlight:"search-highlight",bulk:"bulk"}),h={enter:13},p={searchInput:".j-clips-search",createForm:".j-create-form",createFormError:".j-create-form-error",createFormInput:".j-create-form-input",createFormWrapper:".j-create-form-wrapper",clipboardItem:".j-clipboard-item",clipboardList:".j-clipboard-names-dropdown",createNew:".j-create-new",dropdown:"#clipboard-names-dropdown"},u={listItem:"templates.clipping.clipboards-dropdown-list-item"},f={clipboard:"clipboard-to"},b={clipboardSelected:"clipboard:selected",clipboardCreated:"clipboard:created",bulkClipboardSelected:"clipboard:selected:bulk",bulkClipboardCreated:"clipboard:created:bulk"};n.prototype.attachEventListeners=function(){this.$el.on("input",p.searchInput,this.onSearchClipboards.bind(this)),this.$el.on("input",p.searchInput,this.clearCreateFormError.bind(this)),this.$el.on("input",p.createFormInput,this.clearCreateFormError.bind(this)),this.$el.on("keypress",p.searchInput,this.onSearchKeypress.bind(this)),this.$el.on("click",p.createNew,this.showCreateInput.bind(this)),this.$el.on("submit",p.createForm,this.onCreateFormSubmit.bind(this)),this.$el.on("click",p.clipboardItem,this.onClipboardClick.bind(this))},n.prototype.onCreateFormSubmit=function(t){t.preventDefault(),this.clearCreateFormError(),this.api.createClipboard({title:this.$createFormInput.val()}).then(this.onCreateClipboardSuccess.bind(this),this.onCreateClipboardFailure.bind(this))},n.prototype.onCreateClipboardSuccess=function(t){var e=this.isBulk()?b.bulkClipboardCreated:b.clipboardCreated;this._$events.trigger(e,t),s(document).trigger(b.clipboardCreated,t),this.close()},n.prototype.onCreateClipboardFailure=function(t){this.setCreateFormError("Name "+t.responseJSON.errors.title[0])},n.prototype.onClipboardClick=function(t){var e=s(t.currentTarget),i=e.data(f.clipboard);if(i){var o=this.isBulk()?b.bulkClipboardSelected:b.clipboardSelected;this._$events.trigger(o,i),this.close()}},n.prototype.onSearchClipboards=function(t){var i=s(t.target),n=i.val().toLowerCase(),r=s(p.clipboardItem);r.hide(),r.detach(),r.sort(function(t,i){return e(n,t,i)}),r.appendTo(this.$clipboardList),r.each(function(t,e){var i=s(e),r=i.find("button"),a=i.data(f.clipboard),l=a.title;l.toLowerCase().indexOf(n)>-1&&(r.html(o(a,n)),i.show())}),this.scrollToTop()},n.prototype.onSearchKeypress=function(t){if(t.which===h.enter){var e=s(p.clipboardItem+":visible"),i=e.first(),o=i.data(f.clipboard);o&&(o.is_default?this.close():this._$events.trigger(b.clipboardSelected,o))}},n.prototype.showCreateInput=function(){this.$createNew.hide(),this.$createForm.show(),this.$createFormInput.val("").focus()},n.prototype.setCreateFormError=function(t){var e=Boolean(t);this.$createFormWrapper.toggleClass("error",e),this.$createFormError.text(t||"").toggleClass("hide",!e)},n.prototype.clearCreateFormError=function(){this.setCreateFormError()},n.prototype.on=function(t,e){this._$events.on(t,e)},n.prototype.updateClipboards=function(t){this.$clipboardList.empty().append(t.map(function(t){return t.checkVisibility=t.checked?"show":"hide",itemTempl=this.itemTemplate(t),s(itemTempl).data(f.clipboard,t)}.bind(this)))},n.prototype.updateSearchInput=function(t){var e=t.length>r;this.$clipboardList.toggleClass("has-search",e),this.$searchInput.toggle(e),this.$searchInput.val("")},n.prototype.updateCreateNew=function(){this.clearCreateFormError(),this.$createNew.show(),this.$createForm.hide()},n.prototype.update=function(t){this.updateClipboards(t),this.updateSearchInput(t),this.updateCreateNew(),this.scrollToTop()},n.prototype.close=function(){d&&s(document).foundation("dropdown","close",this.$el)},n.prototype.scrollToTop=function(){this.$clipboardList.scrollTop(0)},n.prototype.isBulk=function(){return this.$clipboardList.hasClass(c.bulk)},l.exports("clips.ClipboardsDropdown",n)}(window),ModalShare.prototype.init=function(){this.$container=$(this.config.el),this.$shareBtn=$(this.config.btnShare),this.$shareEmailMsg=this.$container.find(".j-share-email-msg"),this.$addMsgButton=this.$container.find(".j-add-msg"),this.$emailSentButton=this.$container.find(".j-email-sent"),this.$shareEmailSend=this.$container.find("#share-email-send"),this.$shareEmailForm=this.$container.find(".j-share-email-form"),this.$linkURLInput=this.$container.find(".j-share-link-url"),this.$close=this.$container.find(".j-modal-close"),this.$contentWrapper=this.$container.find(".modal-content-wrapper"),this.gaTrackCategory=this.$container.data("ga-track-category"),this.gaTrackAction=this.$container.data("ga-track-action"),this.shareTracker=new slideshare_object.ShareTracker,this.createShareHash(),slideshare_object&&slideshare_object.user&&slideshare_object.user.loggedin===!0&&null!==slideshare_object.user.login&&this.$container.find(".j-share-email-name").val(slideshare_object.user.login),this.bindModalToShareButtons(),this.bindModalEvents(),this.bindCustomModalEvents(),this.adjustShareModalTop()},ModalShare.prototype.get_viral_share_url=function(t){$elem=$("li."+t+" a");var e=this.data.ssLink;return $elem.length>0&&(e=$.param($elem.data()),!e&&(e=this.data.ssLink)),this.SHARE_HASH[t]+e},ModalShare.prototype.get_viral_share_urls=function(){return{facebook:this.get_viral_share_url("facebook"),linkedin:this.get_viral_share_url("linkedin"),twitter:this.get_viral_share_url("twitter"),wordpress:this.get_viral_share_url("wordpress"),pinterest:this.get_viral_share_url("pinterest"),googleplus:this.get_viral_share_url("googleplus")}},ModalShare.prototype.sharePopup=function(t){var e=626,i=436,o=this.data.social[t];if(void 0!==o){if("facebook"===t){if(window.FB)return void this.postToFacebook()}else if("linkedin"===t&&window.IN&&window.IN.UI)return IN.UI.Share().params({url:this.data.ssLink}).place(),void this.saveShare(t);window.open(o,"shareDialog","width="+e+",height="+i),this.saveShare(t)}},ModalShare.prototype.show=function(){this.reset(),this.$container.show(),this.shareGATracking("modalOpen")},ModalShare.prototype.close=function(){this.reset(),this.$container.hide()},ModalShare.prototype.reset=function(){this.$container.find(".j-embed-use-ssl-cbox").prop("checked",!1),$(".j-modal-popup").scrollTop(0),this.clearEmailFields(),this.$shareEmailForm.show(),this.$emailSentButton.hide(),this.collapseAllSections()},ModalShare.prototype.updateEmbed=function(){var t=this.$container.find(".j-share-embed-link"),e=t.val(),i=this.$container.find(".j-embed-size-picker").val(),o=this.$container.find(".j-embed-size-picker :selected").data("width")||this.config.embed_sizes.presets[i].size.width,n=this.$container.find(".j-embed-size-picker :selected").data("height")||this.config.embed_sizes.presets[i].size.height,r=e.match(/src="([^"]+)"/)[1].split("?")[0],s=this.$container.find(".j-embed-start-picker").prop("selectedIndex")+1||1;r+=s>1?"?startSlide="+s:"",e=e.replace(/src="[^"]+"/,'src="'+r+'"'),e=e.replace("http:",""),e=e.replace("https:",""),e=e.replace(/height="\d+"/,'height="'+n+'"'),e=e.replace(/width="\d+"/,'width="'+o+'"'),t.val(e)},ModalShare.prototype.clearEmailErrorAlerts=function(){$(".error").removeClass("error")},ModalShare.prototype.clearEmailFields=function(){this.$container.find(".j-email-clear").val(""),this.$shareEmailSend.prop("disabled",!1),this.clearEmailErrorAlerts()},ModalShare.prototype.sendShareEmail=function(t){this.shareGATracking("share_email","send");var e=this,i=this.$container.find(".j-share-email-to").val(),o=this.$container.find(".j-share-email-name").val(),n=this.$shareEmailMsg.val(),r=!1;e.$shareEmailSend.val(""),e.$shareEmailSend.addClass("sending"),e.$shareEmailSend.prop("disabled",!0),e.clearEmailErrorAlerts(),r||(r=!0,$.post("/list/email_share",{data:{id:this.data.ssId,name:o,recipients:i,msg:n},dataType:"json"}).done(function(t){if(0===t.respCode)e.clearEmailFields(),e.$shareEmailForm.slideUp(400),e.collapseAllSections(),e.$container.find("#email-sent").slideDown(400),setTimeout(function(){e.$container.find("#email-sent").slideUp(400),e.$shareEmailForm.slideDown(400)},2e3),e.$contentWrapper.removeClass("email-expanded"),e.trackShareEvent({entityId:e.data.ssId,shareType:"email",entityAuthorId:e.data.authorId,isEmbed:e.config.isEmbed||!1});else{var i=e.$container.find(".j-email-flash");switch(i.text(t.resp).show(),t.respCode){case 1:e.$container.find(".j-share-email-to").addClass("error");break;case 2:e.$container.find(".j-share-email-name").addClass("error")}setTimeout(function(){i.fadeOut(400)},5e3)}r=!1,e.$shareEmailSend.val("Send"),e.$shareEmailSend.removeClass("sending"),e.$shareEmailSend.prop("disabled",!1)}).fail(function(t,i,o){r=!1,e.$shareEmailSend.val("Send"),e.$shareEmailSend.removeClass("sending"),e.$shareEmailSend.prop("disabled",!1)}))},ModalShare.prototype.shareGATracking=function(t,e){var i=window._gaq||[];t=this.gaTrackAction?this.gaTrackAction+"_"+t:t,i.push(["_trackEvent",this.gaTrackCategory,t,e])},ModalShare.prototype.renderSlideStartOptions=function(){for(var t="",e=0;e<this.data.totalSlides;e++){var i="slide "+(e+1);t+="<option ",0===e&&(t+=' selected="selected"'),t+=">"+i+"</option>"}var o=this.$container.find(".j-embed-start-picker, .j-share-start-picker");o.empty(),o.append(t),this.updateStartSlide()},ModalShare.prototype.renderDefaultEmbedOptions=function(){var t,e={0:{small:[344,292],medium:[429,357],large:[514,422],"default":[599,487]},1:{small:[386,410],medium:[481,512],large:[576,614],"default":[672,716]},3:{small:[340,191],medium:[425,239],large:[510,287],"default":[595,335]}};t=3===this.data.ssType?e[3]:e[this.data.ssType%2];var i="";for(var o in t){var n=t[o][0]+" x "+t[o][1];i+='<option value="'+o+'" data-width="'+t[o][0]+'" data-height="'+t[o][1]+'"',"default"===o&&(i+=" selected"),i+=">"+n+"</option>"}var r=this.$container.find(".j-embed-size-picker");r.empty(),r.append(i),this.$container.find(".j-embed-start-picker").prop("selecteIndex",1),this.$container.find(".j-share-embed-wp").val(this.data.social.wordpress),this.$container.find(".j-share-embed-link").text(this.data.embedCode)},ModalShare.prototype.toggleAddMessageHeight=function(t){this.$shareEmailMsg.toggleClass("msg-expanded",t)},ModalShare.prototype.collapseAllSections=function(){$(".j-share-expand").slideUp(),$("#share-embed-link").scrollTop(0),$(".j-triggered").removeClass("j-triggered"),this.toggleAddMessageHeight(!1)},ModalShare.prototype.triggerExpand=function(t){this.collapseAllSections(),$(t).addClass("j-triggered"),$(t).siblings(".j-share-expand").slideDown(400,this.adjustShareModalTop.bind(this)),this.$contentWrapper.removeClass("email-expanded embed-expanded"),$(t).hasClass("j-share-email-to")?this.$contentWrapper.addClass("email-expanded"):$(t).hasClass("j-share-embed-link")&&this.$contentWrapper.addClass("embed-expanded")},ModalShare.prototype.getNewSlideURL=function(t,e){var i=document.createElement("a");i.href=t;var o=i.pathname.split("/");o[0]||o.shift();for(var n=o.length,r=o[n-1];!r&&n>0;)o.pop(),n--,r=o[n-1];return parseInt(r,10)&&n>2&&o.pop(),e>1&&o.push(e),i.pathname=o.join("/"),i.href},ModalShare.prototype.getSlideImageURL=function(t){return $('#svPlayerId .slide[data-index="'+t+'"] .slide_image').data("full")},ModalShare.prototype.bindModalEvents=function(){var t=this;this.$close.bind("click",function(){t.close()}),this.$container.find(".j-share-start-picker").change(function(e){t.updateStartSlide(),t.shareGATracking("share_social",$(this).data("ga"))}),this.$shareEmailForm.submit(function(e){e.preventDefault(),e.stopPropagation(),t.sendShareEmail()}),this.$shareEmailMsg.click(function(){t.toggleAddMessageHeight(!0)}),this.$container.find(".j-share-email-to, .j-share-email-name").click(function(e){t.toggleAddMessageHeight(!1)}),this.$container.find(".j-share-social-list li").click(function(){t.sharePopup($(this).data("network")),t.trackShareEvent({entityId:t.data.ssId,shareType:$(this).data("network"),entityAuthorId:t.data.authorId,isEmbed:t.config.isEmbed||!1})}),this.$container.find(".j-update-embed").change(function(){t.updateEmbed()}),this.$container.find(".j-share-embed-link, .j-share-embed-wp, .j-last-screen-ssurl").bind("click",function(){this.select()}),this.$container.find(".j-share-link-url").click(function(){this.select(),t.shareGATracking("share_social",$(this).data("ga"))}),this.$container.find(".j-share-email-form input, .j-share-email-form textarea, .j-add-msg, .j-send-another-email").click(function(e){"send"!==$(this).data("ga")&&t.shareGATracking("share_email",$(this).data("ga"))}),this.$container.find(".j-embed-use-ssl-cbox, .j-embed-related-cbox, .j-embed-size-picker, .j-embed-start-picker").click(function(){t.shareGATracking("share_embed",$(this).data("ga"))}),this.$container.find(".j-share-expand-trigger").click(function(){$(this).siblings(".j-share-expand:visible").length>0||t.triggerExpand(this)}),$(window).resize(function(){t.adjustShareModalTop()}),$(document).keydown(function(e){27===e.which&&(e.preventDefault(),t.close())}),$(".j-modal-popup").on("scroll",function(e){t.$close.css("top",8+$(this).scrollTop()+"px")})},ModalShare.prototype.bindCustomModalEvents=function(){},ModalShare.prototype.createShareHash=function(){this.SHARE_HASH={facebook:"https://www.facebook.com/sharer/sharer.php?",linkedin:"https://www.linkedin.com/cws/share?trk=SLIDESHARE&",twitter:"https://twitter.com/share?",googleplus:"https://plus.google.com/share?",wordpress:"",pinterest:"https://pinterest.com/pin/create/button/?"}},ModalShare.prototype.getSSId=function(t){return t.length?t.data("slideshowid"):slideshare_object.modal_player.get_ss_id()},ModalShare.prototype.bindModalToShareButtons=function(){},ModalShare.prototype.trackShareEvent=function(t){var e=t||{},i=e.isEmbed||!1,o=e.entityAuthorId&&window.slideshare_object.user&&e.entityAuthorId===window.slideshare_object.user.id||!1;this.shareTracker.shareSlideShow({entityId:e.entityId,shareType:e.shareType,isOwner:o,isEmbed:i})},ModalShare.prototype.saveShare=function(t){var e=this;$.get("/account/get_form_authenticity_token").done(function(i){$.post("/share/viralshare",{data:{id:e.data.ssId,network:t},authenticity_token:i.auth_token})})},ModalShare.prototype.showLikeUsModal=function(){},ModalShare.prototype.postToFacebook=function(){var t=this;if(window.FB){var e=function(e){e&&e.post_id&&t.saveShare("facebook")};FB.ui({method:"feed",display:"popup",link:this.data.ssLink},e)}},ModalShare.prototype.adjustShareModalTop=function(){},ModalShare.prototype.updateStartSlide=function(){},function(t){function e(t){this.options=$.extend({},n,t),this.$el=$(t.el),this.$title=this.$el.find(r.title),this.$submitButton=this.$el.find(r.submitButton),this.$content=this.$el.find(r.content),this.onClose=t.onClose,this.status=i.cancel}var i={submit:"submitted",cancel:"cancelled"},o={beforeModalOpen:"open.fndtn.reveal",afterModalOpen:"opened.fndtn.reveal",afterModalClose:"closed.fndtn.reveal"},n={title:slideshare_object.utils.i18n("clipboards.confirm_modal.defaults.title"),content:"",submitText:slideshare_object.utils.i18n("clipboards.confirm_modal.defaults.submit_text"),onClose:$.noop},r={submitButton:".j-submit-button",cancelButton:".j-cancel-button",title:".modal-title",content:".modal-content"};e.prototype._attachEventListeners=function(){this.$el.on("click",r.submitButton,this._onSubmit.bind(this)),this.$el.on("click",r.cancelButton,this._onCancel.bind(this)),this.$el.on(o.beforeModalOpen,this._onBeforeOpen.bind(this)),this.$el.on(o.afterModalOpen,this._onOpened.bind(this)),this.$el.on(o.afterModalClose,this._onClosed.bind(this))},e.prototype._detachEventListeners=function(){this.$el.off()},e.prototype._onBeforeOpen=function(){this.$title.html(this.options.title),this.$content.html(this.options.content),this.$submitButton.text(this.options.submitText)},e.prototype._onOpened=function(){this.$el.focus()},e.prototype._onClosed=function(){this._detachEventListeners(),this.onClose(this.status,this.submitData)},e.prototype._onSubmit=function(){this.status=i.submit,this.close()},e.prototype._onCancel=function(){this.status=i.cancel,this.close()},e.prototype.open=function(){this.status=i.cancel,this._attachEventListeners(),this.$el.foundation("reveal","open")},e.prototype.close=function(){this.$el.foundation("reveal","close")},t.ConfirmModal=e}(window.slideshare_object.Clipboards),function(t,e){function i(t){this["super"](t),this.init()}var o={cancelled:"cancelled",failed:"failed",deleted:"deleted"},n={clipboardDeleted:"clipboard:deleted"},r={i18n:".j-i18n-confirm-modal"};t.inherits(i,t.ConfirmModal),i.prototype.init=function(){var t=JSON.parse($(r.i18n).val());this.options.title=t.titleText,this.options.content=e.processTemplate("{text} <strong>{title}</strong>?",{text:t.contentText,title:this.options.clipboard.title}),this.options.submitText=t.submitText},i.prototype._onSubmit=function(){t.api.deleteClipboard(this.options.clipboard.id).then(function(t){$(document).trigger(n.clipboardDeleted,t),this.status=o.deleted,this.submitData=t,this.close()}.bind(this),function(){this.status=o.failed}.bind(this))},t.DeleteClipboardConfirm=i}(window.slideshare_object.Clipboards,window.jSecure),function(t){function e(t){this.config=$.extend({},d,t),this.clipboard=this.config.clipboard,this.onClose=this.config.onClose,this.onSave=this.config.onSave,this.status=i.cancelled,this.changedFields=s,this._init()}var i={created:"created",updated:"updated",cancelled:"cancelled",failed:"failed"},o={clipboardEdited:"clipboard:edited",clipboardCreated:"clipboard:created",beforeModalOpen:"open.fndtn.reveal",afterModalOpen:"opened.fndtn.reveal",afterModalClose:"closed.fndtn.reveal"},n={cancel:".j-cancel-button",submit:".j-submit-button",form:"form",firstClipMessage:".first-clip-message",modalTitle:".modal-title","private":".j-privacy-input",privacyDescription:"#privacy-switch-description",title:".j-title-input",titleError:".j-title-error",titleWrapper:".j-title-wrapper",description:".j-description-input",descriptionError:".j-description-error",descriptionWrapper:".j-description-wrapper",i18n:".j-i18n-edit-clipboard-modal"},r={firstClipModal:"first-clip-modal",hide:"hide"},s={title:!1,description:!1},a="edit",l="create",d={onClose:$.noop,clipboard:{}};e.prototype._init=function(){var t;if(this.$el=$(this.config.el),!this.$el.length)throw new Error("Error initializing EditModal");this.$form=this.$el.find(n.form),this.$firstClipMessage=this.$el.find(n.firstClipMessage),this.$modalTitle=this.$el.find(n.modalTitle),this.$private=this.$form.find(n["private"]),this.$privacyDescription=this.$form.find(n.privacyDescription),this.$title=this.$form.find(n.title),this.$description=this.$form.find(n.description),this.i18n=JSON.parse($(n.i18n).val()),t=this.$el.find(this.config.focus),this.$focusEl=t.length?t:this.$title,this._attachEventListeners()},e.prototype._attachEventListeners=function(){this.config.type.toLowerCase()===a?this.$el.on("click",n.submit,this._editClipboard.bind(this)):this.$el.on("click",n.submit,this._createClipboard.bind(this)),this.$el.on("click",n.cancel,this.close.bind(this)),this.$el.on("keyup",n.title,this._clearTitleErrors.bind(this)),this.$el.on("keyup",n.description,this._clearDescriptionErrors.bind(this)),this.$el.on("change",n["private"],this._setPrivacyDescription.bind(this)),this.$el.on(o.beforeModalOpen,this._onOpen.bind(this)),this.$el.on(o.afterModalOpen,this._onOpened.bind(this)),this.$el.on(o.afterModalClose,this._onClosed.bind(this))},e.prototype._detachEventListeners=function(){this.$el.off()},e.prototype.reset=function(){this.$form[0].reset(),this._resetChangedFields(),this.$el.removeClass(r.firstClipModal),this.$firstClipMessage.addClass(r.hide)},e.prototype._setModalTitle=function(){var t=this.config.type===l?this.i18n.formTitleCreate:this.i18n.formTitleEdit;this.$modalTitle.text(t)},e.prototype._setFormContent=function(){this.clipboard&&this.config.type.toLowerCase()===a&&(this.$title.val(this.clipboard.title),this.$description.val(this.clipboard.description),this.$private.attr("checked",!!this.clipboard["private"]))},e.prototype._setPrivacyDescription=function(){var t=this.$private.is(":checked")?this.i18n.privacyEnabled:this.i18n.privacyDisabled;this.$privacyDescription.text(t)},e.prototype._setFirstClipMessage=function(){this.config.showFirstClipMessage&&(this.$el.addClass(r.firstClipModal),this.$firstClipMessage.removeClass(r.hide))},e.prototype._showErrors=function(t){var e=(t.responseJSON||{}).errors||{};e.title&&this._setTitleErrors(e.title[0]),e.description&&this._setDescriptionErrors(e.description[0])},e.prototype._setTitleErrors=function(t){var e=this.$el.find(n.titleError),i=this.$el.find(n.titleWrapper);this._setErrors(e,i,t)},e.prototype._setDescriptionErrors=function(t){var e=this.$el.find(n.descriptionError),i=this.$el.find(n.descriptionWrapper);this._setErrors(e,i,t)},e.prototype._setErrors=function(t,e,i){var o=Boolean(i);t.text(i||""),t.toggleClass("hide",!o),e.toggleClass("error",o)},e.prototype._clearTitleErrors=function(){this._setTitleErrors()},e.prototype._clearDescriptionErrors=function(){this._setDescriptionErrors()},e.prototype._onOpen=function(){this._setFirstClipMessage(),this._setModalTitle(),this._setFormContent(),this._setPrivacyDescription()},e.prototype._onOpened=function(){this.$focusEl.focus()},e.prototype._onClosed=function(){this._detachEventListeners(),this.reset(),this.onClose(this.status,this.response)},e.prototype._onClipboadChange=function(){(this.changedFields.title||this.changedFields.description)&&t.sharePrompt.show()},e.prototype._editClipboard=function(e){e.preventDefault(),this._determineChangedFields(),t.api.editClipboard(this.clipboard.id,{title:this.$title.val(),description:this.$description.val(),"private":this.$private.is(":checked")}).then(function(t){$(document).trigger(o.clipboardEdited,{newClipboard:t.clipboard,oldClipboard:this.clipboard}),this.status=i.updated,this.response=t,this.close(),this._onClipboadChange()}.bind(this),function(t){this._showErrors(t),this.status=i.failed}.bind(this))},e.prototype._determineChangedFields=function(){var t=(this.clipboard,this.$title.val()),e=this.$description.val(),i=this.$private.is(":checked");$.extend(this.changedFields,{title:t!==this.clipboard.title,description:e!==this.clipboard.description,privacy:i!==this.clipboard["private"]})},e.prototype._resetChangedFields=function(){this.changedFields=s},e.prototype._createClipboard=function(e){e.preventDefault(),t.api.createClipboard({title:this.$title.val(),description:this.$description.val(),"private":this.$private.is(":checked")}).then(function(t){$(document).trigger(o.clipboardCreated,t),this.status=i.created,this.response=t,this.close()}.bind(this),function(t){this._showErrors(t),this.status=i.failed}.bind(this))},e.prototype.open=function(){this.status=i.cancelled,this.response=null,this.$el.foundation("reveal","open")},e.prototype.close=function(){this.$el.foundation("reveal","close")},t.EditModal=e}(window.slideshare_object.Clipboards),function(t){function e(){t.actionBarMixin.call(this);var e=$(o.actionBar);this.$document=$(document),this.$el=e,this.$listButton=e.find(o.listButton),this.$gridButton=e.find(o.gridButton),this.$checkButton=e.find(o.checkButton),this.$copyButton=e.find(o.copyButton),this.$deleteButton=e.find(o.deleteButton),this.$clipsContent=$(o.clipsContent),this.$dropdown=this.$clipsContent.find(o.dropdown),this.$clipsList=$(o.clipsList),this.$clipsGrid=$(o.clipsGrid),this.i18n=JSON.parse($(o.i18n).val()),e.on("click",o.listButton,this._onListButtonClick.bind(this)),e.on("click",o.gridButton,this._onGridButtonClick.bind(this)),e.on("click",o.deleteButton,this._onDeleteButtonClick.bind(this))}var i={deleteClick:"action-bar:delete:click",toGrid:"action-bar:view:to-grid",toList:"action-bar:view:to-list"},o={clipsContent:".clips-content",actionBar:".j-action-bar",listButton:".j-list-button",gridButton:".j-grid-button",checkButton:".j-check-button",copyButton:".j-copy-button",deleteButton:".j-delete-button",dropdown:".j-clipboard-names-dropdown",clipsList:".j-clips-list",clipsGrid:".j-clips-grid",deleteConfirmModal:"#delete-confirm-modal",i18n:".j-i18n-action-bar"};e.prototype.setDeleteButtonPending=function(){this.setButtonPending(this.$deleteButton,"delete")},e.prototype.clearDeleteButtonPending=function(){this.clearButtonPending(this.$deleteButton,"delete")},e.prototype.setCopyButtonPending=function(){this.setButtonPending(this.$copyButton,"copy")},e.prototype.clearCopyButtonPending=function(){this.clearButtonPending(this.$copyButton,"copy")},e.prototype.closeDropdown=function(){this.$el.foundation("dropdown","close",this.$dropdown)},e.prototype._onDeleteButtonClick=function(e){var n=new t.ConfirmModal({el:o.deleteConfirmModal,submitText:this.i18n.submitText,title:this.i18n.titleText,content:this.i18n.contentText,onClose:function(t){"submitted"===t&&this.$document.trigger(i.deleteClick)}.bind(this)});n.open()},e.prototype._onListButtonClick=function(t){t.preventDefault(),this._show(this.$clipsList),this._hide(this.$clipsGrid),this._activeOn(this.$listButton),this._activeOff(this.$gridButton),this.$clipsContent.resize(),this.$document.trigger(i.toList)},e.prototype._onGridButtonClick=function(t){t.preventDefault(),this._show(this.$clipsGrid),this._hide(this.$clipsList),this._activeOn(this.$gridButton),this._activeOff(this.$listButton),this.$clipsContent.resize(),this.$document.trigger(i.toGrid)},e.prototype._show=function(t){t.toggleClass("hide",!1)},e.prototype._hide=function(t){t.toggleClass("hide",!0)},e.prototype._activeOn=function(t){t.toggleClass("active",!0)},e.prototype._activeOff=function(t){t.toggleClass("active",!1)},t.ActionBar=e}(window.slideshare_object.Clipboards),function(t){function e(t){this.config=$.extend({},l,t),this.$document=$(document),this.clipboard=$(a.parent).data(),this._init()}var i=t.Clipboards,o=t.utils.imports("ClipboardModalShare"),n=t.utils.imports("DynamicTextarea"),r={clipboardEdited:"clipboard:edited",clipboardShared:"clipboard:shared",clipboardDeleted:"clipboard:deleted"},s={show:"show",edit:"edit"},a={parent:".clipboards",header:".clipping-header",collapsedHeader:".collapsed-container",shareButton:".j-share-clipboard",shareModal:"#clipboard-share-modal",deleteButton:".j-delete-clipboard",deleteModal:"#clipboard-delete-modal",editButton:".j-edit-clipboard",editModal:"#clipboard-edit-modal",titleContainer:".title-container",title:".clipboard-title",mainTitle:".main-title",editableTitle:".editable-title",editTitleButton:".clipboard-edit-title",descriptionWrapper:".clipboard-description",expandDescription:".expand-description",longDescription:".long-description",shortDescription:".short-description",addDescriptionButton:".clipboard-add-description",editableDescription:".editable-description",editDescriptionButton:".clipboard-edit-description"},l={el:a.header,onScrollThreshold:20};e.prototype._init=function(){this.$el=$(this.config.el),this.$window=$(window),this.$title=this.$el.find(a.title),this.$titleContainer=this.$el.find(a.titleContainer),this.$mainTitle=this.$titleContainer.find(a.mainTitle),this.$editableTitle=this.$titleContainer.find(a.editableTitle),this.$editTitleButton=this.$titleContainer.find(a.editTitleButton),this.$description=$(a.descriptionWrapper),this.$expandDescription=this.$description.find(a.expandDescription),this.$longDescription=this.$description.find(a.longDescription),this.$shortDescription=this.$description.find(a.shortDescription),this.$addDescriptionButton=this.$description.find(a.addDescriptionButton),this.$editableDescription=this.$description.find(a.editableDescription),this.$editDescriptionButton=this.$description.find(a.editDescriptionButton),this.$shareButton=this.$el.find(a.shareButton),this.$collapsedHeader=this.$el.find(a.collapsedHeader),this.$editableTitle.length&&this.$editableDescription.length&&(this.dynamicTitle=new n({selector:a.editableTitle,onSave:this._updateClipboard.bind(this)}),this.dynamicDescription=new n({selector:a.editableDescription,autoResize:!1,onSave:this._updateClipboard.bind(this)})),this.config.elOffsetTop=this.$el.offset().top,this._setCollapsedHeaderOffset(),this._attachEventListeners()},e.prototype._attachEventListeners=function(){this.$el.on("click",a.deleteButton,this._onDeleteClick.bind(this)),this.$el.on("click",a.shareButton,this._onShareButtonClick.bind(this)),this.$el.on("click",a.editButton,this._onEditClick.bind(this)),this.$el.on("click",a.expandDescription,this._toggleDescription.bind(this)),this.$el.on("click",a.addDescriptionButton,this._onAddDescriptionButtonClick.bind(this)),i.config.userIsOwner&&(this.$mainTitle.on("click",this._onTitleClick.bind(this)),this.$editTitleButton.on("click",this._onTitleClick.bind(this)),this.$shortDescription.on("click",this._onDescriptionClick.bind(this)),this.$longDescription.on("click",this._onDescriptionClick.bind(this)),this.$editDescriptionButton.on("click",this._onDescriptionClick.bind(this))),this.$window.on("scroll",Foundation.utils.throttle(this._onPageScroll.bind(this),100)),this.$window.on("resize",Foundation.utils.debounce(this._setCollapsedHeaderOffset.bind(this),100))},e.prototype._onShareButtonClick=function(t){var e=new o({el:a.shareModal,shareEntity:this.clipboard,shareEntityType:"clipboard"});e.open()},e.prototype._onDeleteClick=function(t){var e=new i.DeleteClipboardConfirm({el:a.deleteModal,clipboard:this.clipboard,onClose:this._onClipboardDeleted.bind(this)});e.open()},e.prototype._openEditModal=function(t){var e=$.extend({},{el:a.editModal,clipboard:this.clipboard,type:"edit",onClose:this._onClipboardEdited.bind(this)},t);this.editClipboardModal=new i.EditModal(e),this.editClipboardModal.open()},e.prototype._onEditClick=function(t){this._openEditModal()},e.prototype._onAddDescriptionButtonClick=function(t){this._openEditModal({focus:".j-description-input"})},e.prototype._onTitleClick=function(t){this.$titleContainer.addClass(s.edit),this.$editableTitle.focus(),this.dynamicTitle.setHeight()},e.prototype._onDescriptionClick=function(t){this.$description.addClass(s.edit),this.$editableDescription.focus()},e.prototype._updateClipboard=function(){var t=this.$editableTitle.val().trim(),e=this.$editableDescription.val().trim(),o={title:t,description:e};""===t?this.$editableTitle.val(this.clipboard.title):t===this.clipboard.title&&e===this.clipboard.description||(this._updateHeader(o),i.api.editClipboard(this.clipboard.id,o).then(function(t){this._onClipboardEdited("updated",t),this.$document.trigger(r.clipboardEdited,{newClipboard:t.clipboard,oldClipboard:this.clipboard})}.bind(this),function(t){this._updateHeader(this.clipboard)}.bind(this))),this.$titleContainer.removeClass(s.edit),
this.$description.removeClass(s.edit)},e.prototype._onClipboardEdited=function(t,e){if("updated"===t){var i=e.clipboard;this._updateHeader(i),this._updateClipboardModel(i)}},e.prototype._updateHeader=function(t){var e=i.config.clipboardDescriptionMaxLength,o=this.clipboard.description,n=t.description,r=n.substring(0,e),s=n.length>e;this.$title.text(t.title),this.$editableTitle.val(t.title),this.$expandDescription.toggleClass("hide",!s),this.$longDescription.text(n),this.$shortDescription.text(r),this.$editableDescription.val(t.description),this.$shareButton.prop("disabled",t["private"]),this._toggleAddDescriptionButton(o,n)},e.prototype._toggleAddDescriptionButton=function(t,e){var i=this.$addDescriptionButton,o=i.hasClass("hide"),n=t,r=e;if(!(n.length&&r.length||!n.length&&!r.length))return n.length||!r.length||o?n.length&&!r.length&&o?(this.$editDescriptionButton.addClass("hide"),i.removeClass("hide")):void 0:(this.$editDescriptionButton.removeClass("hide"),i.addClass("hide"))},e.prototype._updateClipboardModel=function(t){var e=$.extend({},this.clipboard,t);$(a.parent).data(e),this.clipboard=e},e.prototype._toggleDescription=function(){var t=!this.$shortDescription.hasClass("hide"),e=t?slideshare_object.utils.i18n("clipboards.header_bar.less"):slideshare_object.utils.i18n("clipboards.header_bar.show_more");this.$longDescription.toggleClass("hide"),this.$shortDescription.toggleClass("hide"),this.$expandDescription.text(e)},e.prototype._onClipboardDeleted=function(t){"deleted"===t&&window.setTimeout(function(){document.location.replace(i.config.indexUrl)},100)},e.prototype._onPageScroll=function(){var t=this.$el.offset().top,e=t+this.$el.height(),i=this.$window.scrollTop()+t-this.config.onScrollThreshold<e;Foundation.utils.is_medium_up()&&this.$collapsedHeader.toggleClass(s.show,!i)},e.prototype._setCollapsedHeaderOffset=function(){this.$collapsedHeader.css({top:this.$el.offset().top})},i.HeaderBar=e}(window.slideshare_object),function(t,e,i,o){function n(t){if(this.config=$.extend({},c,t),this.clipboardId=this.config.clipboardId,this.clipId=this.config.clipId,!(this.clipboardId&&this.clipId&&this.config.el))throw new Error("AnnotationComponent unable to initialize.");if(!o||!i)throw new Error("AnnotationComponent dependencies missing.");this._init()}var r=e.utils.imports("clips.api"),s={shortened:"shortened",expanded:"expanded"},a={actionCancel:"cancel",actionEdit:"edit",actionSave:"save",actionShowLess:"show-less",actionShowMore:"show-more"},l={action:"action",originalText:"originalText",truncatedText:"truncatedText"},d={annotation:".annotation",annotationText:".annotation-text",annotationInput:".annotation-input",annotationInputBtns:".annotation-input-btns",button:"button",cancel:".annotation-cancel",edit:".annotation-edit",save:".annotation-save",showMore:".annotation-show-more",showLess:".annotation-show-less"},c={clipboardId:null,clipId:null,el:null,isClipboardOwner:!1,truncateLimit:175};n.prototype={_attachEventListeners:function(){this.$annotationInput.on("focus.annotation",this._onAnnotationInputFocus.bind(this)),this.$annotationInput.on("input.annoation",this._onAnnotationInputChange.bind(this)),this.$btn.on("click.annotation",this._buttonDelegate.bind(this))},_buttonDelegate:function(t){var e=$(t.target).data(l.action);switch(e){case a.actionCancel:this._onCancelClick(t);break;case a.actionEdit:this._onEditClick(t);break;case a.actionSave:this._onSaveClick(t);break;case a.actionShowLess:this._onShowLessClick(t);break;case a.actionShowMore:this._onShowMoreClick(t)}},constructor:n,_enterEditState:function(){this.$annotation.hide(),this.$annotationInput.show().focus(),this.$annotationInputBtns.show(),this._setAnnotationInputHeight(),this._setCursorAtEnd(this.$annotationInput)},_enterViewState:function(t){var e=!t.annotation.trim();this.config.isClipboardOwner?(e?this.$annotationInput.val("").show():(this.$annotationInput.hide(),this.$annotation.show(),this.$btnEdit.show()),this.$annotationInput.height("auto"),this.$annotationInputBtns.hide()):e||this.$annotation.show()},_init:function(){var t;this.$el=$(this.config.el),this.$annotation=this.$el.find(d.annotation),this.$annotationText=this.$el.find(d.annotationText),this.$annotationInput=this.$el.find(d.annotationInput),this.$annotationInputBtns=this.$el.find(d.annotationInputBtns),this.$btn=this.$el.find(d.button),this.$btnEdit=this.$el.find(d.edit),t=this.$annotationInput.val(),this.config.isClipboardOwner||(this._setTruncateValues(),t.length>=this.config.truncateLimit&&this._truncateShorten()),this._enterViewState({annotation:t}),this.$el.show(),this._attachEventListeners()},_onAnnotationInputChange:function(){this._setAnnotationInputHeight()},_onAnnotationInputFocus:function(){this.$annotationInputBtns.show()},_onCancelClick:function(){this.$annotationInput.val(this.$annotationText.text()),this._enterViewState({annotation:this.$annotationText.text()})},_onEditClick:function(){this._enterEditState()},_onSaveClick:function(t){r.addAnnotation(this.clipboardId,this.clipId,this.$annotationInput.val()).fail(function(t,e,i){}.bind(this)).done(function(t){this.$annotationText.text(i.htmlUnencode(t.annotation)),this._setTruncateValues(),this._enterViewState({annotation:t.annotation})}.bind(this))},_onShowLessClick:function(){this._truncateShorten()},_onShowMoreClick:function(){this._truncateExpand()},_setAnnotationInputHeight:function(){this.$annotationInput.height(0).height(this.$annotationInput[0].scrollHeight)},_setCursorAtEnd:function(t){var e=t.val().length,i=t.get(0);t.focus(),i.setSelectionRange&&i.setSelectionRange(e,e)},_setTruncateValues:function(){var t=this.$annotationText.text();this.$annotationText.data({originalText:t,truncatedText:t.substring(0,this.config.truncateLimit)})},_truncateExpand:function(){this.$annotation.removeClass(s.shortened).addClass(s.expanded),this.$annotationText.text(this.$annotationText.data(l.originalText))},_truncateShorten:function(){this.$annotation.removeClass(s.expanded).addClass(s.shortened),this.$annotationText.text(this.$annotationText.data(l.truncatedText))}},o("AnnotationComponent",n)}(window,window.slideshare_object,window.jSecure,window.slideshare_object.utils.exports),function(t,e){function i(t){this.config=$.extend({},p,t),this.isListViewActive=$(a.listViewButton).hasClass(l.active),this.isAnnotationOnboardingEnabled=this.config.userIsOwner&&!this.config.userHasAnnotated&&this.isListViewActive&&null===localStorage.getItem(c),this._init()}var o=e.utils,n=o.isUserAuthenticated(),r=n?e.user.id:"",s=$(t),a={annotationInput:".annotation-input",tour:{annotation:"#annotation-intro-tour"},joyrideModalBg:".joyride-modal-bg",listViewButton:".j-list-button"},l={active:"active"},d="slideshare.clips.shownAnnotationTour",c=n?d+"."+r:d,h="first-annotation",p={storageKey:{annotationTour:c},userIsOwner:!1,userHasAnnotations:!0},u={modal:!1,abort_on_close:!1};i.prototype={constructor:i,_init:function(){this.$firstAnnotation=$(a.annotationInput).first(),this._attachEventListeners()},_attachEventListeners:function(){this.isAnnotationOnboardingEnabled&&s.on("scroll.clipsview",function(){s.scrollTop()>0&&this.showAnnotationTour()}.bind(this))},showAnnotationTour:function(){s.off("scroll.clipsview"),this.$firstAnnotation.attr("id",h),$(a.tour.annotation).foundation({joyride:u}).foundation("joyride","start"),t.localStorage.setItem(c,1)}},o.exports("ClipsViewOnboarding",i)}(window,window.slideshare_object),function(t){function e(){i.overlayMixin.call(this),this.$document=$(document),this.$el=$(a.content),this.$firstThumbnail=this.$el.find(a.firstThumbnail),this._attachEventListeners()}var i=t.Clipboards,o=t.utils,n=o.imports("templates.clipping.clipboard-item"),r=o.imports("ClipboardModalShare"),s={clipboardShareButton:"j-share-clipboard-button",clipboardDeleteButton:"j-delete-clipboard-button",clipboardCreateButton:"create-thumbnail"},a={content:"#clipboards-content",firstThumbnail:".j-create-modal-item",clipboardItem:".j-clipboard-item",clipboardItemList:".j-clipboards-list",clipboardShareModal:"#clipboard-share-modal",clipboardCreateModal:"#clipboard-create-modal",clipboardDeleteModal:"#clipboard-delete-modal",clipboardShareButton:"."+s.clipboardShareButton,clipboardCreateButton:"."+s.clipboardCreateButton,clipboardDeleteButton:"."+s.clipboardDeleteButton},l={i18n:o.i18n()};e.prototype._attachEventListeners=function(){$(a.clipboardItemList).on("click",a.clipboardItem,this._onClipboardItemClick.bind(this)),$(a.clipboardCreateButton).on("click",this._onCreateButtonClick.bind(this)),this.attachOverlayEvents()},e.prototype._onClipboardItemClick=function(t){var e=$(t.target),i=$(t.target).closest(a.clipboardItem),o=e.is("button")?e:e.parent(),n=i.data();o.hasClass(s.clipboardShareButton)?n["private"]||this._onShareButtonClick(t,n):o.hasClass(s.clipboardDeleteButton)&&this._onDeleteButtonClick(t,n)},e.prototype._onCreateButtonClick=function(t){var e=new i.EditModal({el:a.clipboardCreateModal,type:"create",onClose:this._onClipboardCreated.bind(this)});e.open()},e.prototype._onClipboardCreated=function(t,e){var i;e&&e.clipboard&&(i=$(n($.extend({clipboard:e.clipboard||{},clipboard_url:e.clipboard_url||"",share_urls:e.share_urls||{}},l))),this.$firstThumbnail.after(i),this.attachOverlayEvents(i.find(".overlay")))},e.prototype._onClipboardDeleted=function(t,e){var i;e&&e.clipboard&&(i=a.clipboardItem+'[data-id="'+e.clipboard.id+'"]',this.$el.find(i).remove())},e.prototype._onDeleteButtonClick=function(t,e){var o=new i.DeleteClipboardConfirm({el:a.clipboardDeleteModal,clipboard:e,onClose:this._onClipboardDeleted.bind(this)});o.open()},e.prototype._onShareButtonClick=function(t,e){this.shareModal=new r({el:a.clipboardShareModal,shareEntity:e,shareEntityType:"clipboard"}),this.shareModal.open()},i.IndexView=e}(window.slideshare_object),function(t,e,i){function o(){var t;n.actionBarMixin.call(this),n.overlayMixin.call(this),this.$document=$(document),this.api=n.api,this.actionBar=n.actionBar,this.annotations=null,this.currentClip=null,this.clipboardId=$(h.parent).data("id"),this.clips=n.config.commonClipboards||[],this.clipboards=n.config.sessionUserClipboards||[],this.userIsOwner=n.config.userIsOwner,this.userHasAnnotated=n.config.userHasAnnotated,this.$el=$(h.content),this.$dropdown=this.$el.find(h.dropdown),this.$annotationContainer=this.$el.find(h.annotationContainer),this.userIsOwner||0!==this.clipboards.length||this.clipboards.push(this._createFakeSystemClipboard()),this.dropdown=new a,this.dropdown.update(this.clipboards),this.annotations=$.map(this.$annotationContainer,function(t){var e,i=$(t).closest(h.thumbnail).data();if(this.clipboardId&&i&&i.id)return e=new r({el:t,clipboardId:this.clipboardId,clipId:i.id,isClipboardOwner:this.userIsOwner})}.bind(this)),t=new s({userIsOwner:this.userIsOwner,userHasAnnotated:this.userHasAnnotated}),this._attachEventListeners()}var n=e.Clipboards,r=i("AnnotationComponent"),s=i("ClipsViewOnboarding"),a=i("clips.ClipboardsDropdown"),l="My Clips",d={clipCreated:"clip:created",clipDeleted:"clip:deleted",clipCopied:"clip:copied",clipReclipped:"clip:reclipped",clipsDeleted:"clips:deleted",clipsCopied:"clips:copied",clipsReclipped:"clips:reclipped",clipboardSelected:"clipboard:selected",clipboardCreated:"clipboard:created",bulkClipboardSelected:"clipboard:selected:bulk",bulkClipboardCreated:"clipboard:created:bulk",deleteSelectedClick:"action-bar:delete:click",dropDownOpened:"opened.fndtn.dropdown",dropDownClosed:"closed.fndtn.dropdown",toList:"action-bar:view:to-list"},c={reclip:"reclip",ddexpanded:"dropdown-expanded",bulk:"bulk"},h={annotationContainer:".annotation-container",content:"#clips-content",sharePromptHook:".j-clips-list:not(.hide) li:eq(4)",copyButtonOpen:".overlay .j-copy-button[aria-expanded=true]",deleteButton:".overlay .j-delete-button",dropdown:".j-clipboard-names-dropdown",overlay:".overlay",parent:".clipboards",thumbnail:".j-clip-thumbnail"};o.prototype._attachEventListeners=function(){this.$el.on("click",h.deleteButton,this._deleteClip.bind(this)),this.$el.on(d.dropDownOpened,this._onDropdownOpened.bind(this)),this.$el.on(d.dropDownClosed,this._onDropdownClosed.bind(this)),this.$document.on(d.deleteSelectedClick,this._deleteSelectedClips.bind(this)),this.$document.on(d.toList,this._attachWaypointEvent.bind(this)),this.dropdown.on(d.clipboardSelected,this._copyToClipboard.bind(this)),this.dropdown.on(d.bulkClipboardSelected,this._bulkCopyToClipboard.bind(this)),this.dropdown.on(d.clipboardCreated,this._onSingleClipboardCreated.bind(this)),this.dropdown.on(d.bulkClipboardCreated,this._onBulkClipboardCreated.bind(this)),this._attachWaypointEvent(),this.attachOverlayEvents()},o.prototype._attachWaypointEvent=function(){var t=$(h.sharePromptHook);t.waypoint(function(){n.sharePrompt.show(),this.destroy()})},o.prototype._onDropdownClosed=function(t,e){this.$el.find("."+c.ddexpanded).removeClass(c.ddexpanded),this.$dropdown.removeClass(c.bulk)},o.prototype._onDropdownOpened=function(t,e,i){var o=$(i);if(o.hasClass(c.bulk))this.$dropdown.addClass(c.bulk),this._updateBulkDropdown();else{var n=o.closest(h.overlay);n.addClass(c.ddexpanded);var r=o.closest(h.thumbnail),s=r.data();this.currentClipClipboards=this.clips[s.id],this._updateSingleDropdown(this.currentClipClipboards,this.clipboards)}},o.prototype._updateSingleDropdown=function(t,e){var i=t||[];this.clipboards.forEach(function(t){t.checked=$.inArray(t.id,i)>-1}),this.dropdown.update(this.clipboards)},o.prototype._updateBulkDropdown=function(){this.clipboards.forEach(function(t){t.checked=!1}),this.dropdown.update(this.clipboards)},o.prototype._onSingleClipboardCreated=function(t,e){var i=e.clipboard;this._copyToClipboard(t,i),this._clipboardCreated(i)},o.prototype._onBulkClipboardCreated=function(t,e){var i=e.clipboard;this._bulkCopyToClipboard(t,i),this._clipboardCreated(i)},o.prototype._clipboardCreated=function(t){this.clipboards[0]&&null===this.clipboards[0].id&&(this.clipboards=[]),this.clipboards.push(t),this._sortClipboards()},o.prototype._bulkCopyToClipboard=function(t,e){var i=n.bulkSelect.getSelectedIds(),o=e.id;this.userIsOwner?this._copySelectedClips(o,i):o===-1?this.api.createClipboard(e).then(function(t){this.clipboards=[t.clipboard],this._reclipSelectedClips(t.clipboard.id,i)}.bind(this)):this._reclipSelectedClips(o,i)},o.prototype._copySelectedClips=function(t,e){this.actionBar.setCopyButtonPending(),this.api.addClips(t,e).then(function(e){this.$document.trigger(d.clipsCopied,{clips:e.clips,fromClipboardId:this.clipboardId,toClipboardId:t})}.bind(this)).done(function(){this._updateClips(e,t),n.sharePrompt.show()}.bind(this)).always(function(t){this.actionBar.clearCopyButtonPending()}.bind(this))},o.prototype._reclipSelectedClips=function(t,e){this.setButtonPending(this.actionBar.$copyButton,"copy"),this.api.reclipClips(t,this.clipboardId,e).then(function(e){this.$document.trigger(d.clipsReclipped,{clips:e.clips,fromClipboardId:this.clipboardId,toClipboardId:t}),$.each(e.created_clips,function(e,i){this.$document.trigger(d.clipCreated,{clip:i,clipboardId:t})}.bind(this))}.bind(this)).done(function(){this._updateClips(e,t),n.sharePrompt.show()}.bind(this)).always(this.clearButtonPending.bind(this,this.actionBar.$copyButton,"copy"))},o.prototype._deleteSelectedClips=function(){var t=n.bulkSelect.getSelectedIds();this.actionBar.setDeleteButtonPending(),this.api.deleteClipsFromClipboard(this.clipboardId,t).then(function(e){$.each(t,function(t,e){this._removeClipThumbnail(e)}.bind(this)),this.$document.trigger(d.clipsDeleted,{clips:e.clips,fromClipboardId:this.clipboardId}),this.$el.resize(),n.sharePrompt.show()}.bind(this)).always(function(){this.actionBar.clearDeleteButtonPending()}.bind(this))},o.prototype._copyToClipboard=function(t,e){t.preventDefault();var i=this.$el.find(h.copyButtonOpen),o=i.closest(h.thumbnail),n=o.data();e.id===-1?this.api.createClipboard(e).then(function(t){this.clipboards=[t.clipboard],this._addClipToClipboard(t.clipboard.id,n,i)}.bind(this)):this._addClipToClipboard(e.id,n,i),this._updateSingleDropdown(this.currentClip,this.clipboards)},o.prototype._addClipToClipboard=function(t,e,i){var o=this.userIsOwner?d.clipCopied:d.clipReclipped;this.setButtonPending(i,"copy"),this.api.addClipToClipboard(t,e).then(function(e){e.clip.alreadyInClipboard||(this.$document.trigger(o,{clip:e.clip,fromClipboardId:this.clipboardId,toClipboardId:t}),e.created_clip&&this.$document.trigger(d.clipCreated,{clip:e.created_clip,clipboardId:t}))}.bind(this)).done(function(){this._updateClips([e.id],t),n.sharePrompt.show()}.bind(this)).always(this.clearButtonPending.bind(this,i,"copy"))},o.prototype._updateClips=function(t,e){t.forEach(function(t){this.clips[t].push(e)},this)},o.prototype._deleteClip=function(t){t.preventDefault();var e=$(t.target),i=e.closest(h.deleteButton),o=i.closest(h.thumbnail),n=o.data();this.setButtonPending(i,"delete"),this.api.deleteClipFromClipboard(this.clipboardId,n.id).then(function(t){this._removeClipThumbnail(n.id),this.$document.trigger(d.clipDeleted,{clip:t.clip,fromClipboardId:this.clipboardId}),this.$el.resize()}.bind(this)).always(function(){this.clearButtonPending(i,"delete")}.bind(this))},o.prototype._createFakeSystemClipboard=function(){return{title:l,system_created:!0,id:-1}},o.prototype._removeClipThumbnail=function(t){$("#"+t+"-large").remove(),$("#"+t+"-small").remove()},o.prototype._sortClipboards=function(){this.clipboards.sort(function(t,e){return t.title.localeCompare(e.title)})},n.ClipsView=o}(window,window.slideshare_object,window.slideshare_object.utils.imports),function(t){function e(){this.$document=$(document),this.$el=$(i.content),this.tracker=t.tracker,this.attachEventListeners(),this.tracker.pageView()}var i={clipboard:".j-clipboard-item",content:"#clipboards-content",shareButton:".j-share-clipboard-button"};e.prototype.attachEventListeners=function(){this.$el.on("click",i.shareButton,this.onShareClick.bind(this)),this.$document.on("clipboard:created",function(t,e){this.tracker.createClipboard(e.clipboard)}.bind(this)),this.$document.on("clipboard:deleted",function(t,e){this.tracker.deleteClipboard(e.clipboard)}.bind(this)),this.$document.on("clipboard:shared",function(t,e){this.tracker.shareClipboard(e.clipboard.id,e.shareType)}.bind(this))},e.prototype.onShareClick=function(t){var e=$(t.target).closest(i.clipboard),o=e.data();this.tracker.clickShareClipboard(o.id)},t.IndexTrack=e}(window.slideshare_object.Clipboards),function(t){function e(){this.$document=$(document),this.clipboardId=$(i.parent).data("id"),this.tracker=t.tracker,this.attachEventListeners(),this.tracker.pageView(this.clipboardId)}var i={parent:".clipboards",content:"#clips-content",shareButton:".j-share-clipboard",sourceUrl:".j-source-url"};e.prototype.attachEventListeners=function(){this.$document.on("click",i.shareButton,function(){this.tracker.clickShareClipboard(this.clipboardId)}.bind(this)),this.$document.on("click",i.sourceUrl,function(t){var e=$(t.target).closest("li").data()||{};this.tracker.clickClipThumbnail(this.clipboardId,e.id)}.bind(this)),this.$document.on("clip:created",function(t,e){this.tracker.createClip(e.clip,e.clipboardId)}.bind(this)),this.$document.on("clip:copied",function(t,e){this.tracker.copySingleClip(e.clip.id,e.fromClipboardId,e.toClipboardId)}.bind(this)),this.$document.on("clip:reclipped",function(t,e){this.tracker.reclipSingleClip(e.clip.id,e.fromClipboardId,e.toClipboardId)}.bind(this)),this.$document.on("clip:deleted",function(t,e){this.tracker.removeSingleClip(e.clip.id,e.fromClipboardId)}.bind(this)),this.$document.on("clip:reordered",function(t,e){this.tracker.reorderSingleClip(e.clip.id,e.fromClipboardId)}.bind(this)),this.$document.on("clips:copied",function(t,e){var i=this._getClipIds(e.clips);this.tracker.copyMultipleClips(i,e.fromClipboardId,e.toClipboardId)}.bind(this)),this.$document.on("clips:reclipped",function(t,e){var i=this._getClipIds(e.clips);this.tracker.reclipMultipleClips(i,e.fromClipboardId,e.toClipboardId)}.bind(this)),this.$document.on("clips:deleted",function(t,e){var i=this._getClipIds(e.clips);this.tracker.removeMultipleClips(i,e.fromClipboardId)}.bind(this)),this.$document.on("clips:reordered",function(t,e){var i=this._getClipIds(e.clips);this.tracker.reorderMultipleClips(i,e.fromClipboardId)}.bind(this)),this.$document.on("action-bar:view:to-grid",function(){this.tracker.clickViewToGrid(this.clipboardId)}.bind(this)),this.$document.on("action-bar:view:to-list",function(){this.tracker.clickViewToList(this.clipboardId)}.bind(this)),this.$document.on("clipboard:created",function(t,e){this.tracker.createClipboard(e.clipboard)}.bind(this)),this.$document.on("clipboard:edited",function(t,e){this.tracker.editClipboard(e.newClipboard,e.oldClipboard)}.bind(this)),this.$document.on("clipboard:shared",function(t,e){this.tracker.shareClipboard(e.clipboard.id,e.shareType)}.bind(this)),this.$document.on("clipboard:deleted",function(t,e){this.tracker.deleteClipboard(e.clipboard)}.bind(this))},e.prototype._getClipIds=function(t){return t.map(function(t){return t.id})},t.ClipsTrack=e}(window.slideshare_object.Clipboards),function(t){function e(){this.$selectButton=$(a.selectButton),this.$copyButton=$(a.copyButton),this.$deleteButton=$(a.deleteButton),this.$iconSelect=$(a.iconSelect),this.$overlay=$(a.overlay),this.$selectButton.click(this._onSelectButtonClick.bind(this)),this.$document=$(document),this.setSelected(!1),this._updateActionButtons(),this.$document.on("clip:deleted",this._updateActionButtons.bind(this)),this.$document.on("change",a.iconSelect,this._onSelectChange.bind(this))}var i="fa-square-o",o="fa-check-square-o",n="Select all",r="Deselect all",s="hide",a={clipIdSmall:"#clip-select-small-",clipIdLarge:"#clip-select-large-",iconSelect:".thumbnail .j-icon-select",overlay:".thumbnail .overlay",iconSelectLarge:".thumbnail .j-icon-select.large",iconSelectSmall:".thumbnail .j-icon-select.small",selectButton:".j-action-bar .j-select-button",copyButton:".j-action-bar .j-copy-button",deleteButton:".j-action-bar .j-delete-button"};e.prototype.allSelected=function(){return 0===this.getUnselected().length},e.prototype.anySelected=function(){return this.getSelected().length>0},e.prototype.getSelected=function(){return $(a.iconSelectLarge+":checked")},e.prototype.getUnselected=function(){return $(a.iconSelectLarge+":not(:checked)")},e.prototype.getSelectedIds=function(){return this.getSelected().map(function(t,e){return this.extractClipId($(e))}.bind(this)).get()},e.prototype.extractClipId=function(t){return t.attr("id").replace(/clip-select-(small|large)-/,"")},e.prototype.setSelected=function(t,e){if(!e)return this.$iconSelect.prop("checked",t),void this.$overlay.toggleClass("selected",t);var i=$(a.clipIdLarge+e),o=$(a.clipIdSmall+e),n=$(a.overlay+"[data-clip-id="+e+"]");i.prop("checked",t),o.prop("checked",t),n.toggleClass("selected",t)},e.prototype._onSelectChange=function(t){var e=$(t.target),i=this.extractClipId(e),o=e.is(":checked");this.setSelected(o,i),this._updateActionButtons()},e.prototype._onSelectButtonClick=function(t){this.setSelected(!this.allSelected()),this._updateActionButtons()},e.prototype._updateActionButtons=function(){var t=this.allSelected(),e=this.anySelected(),a=this.$selectButton.find("i"),l=t?r:n;a.toggleClass(i,!t),a.toggleClass(o,t),this.$selectButton.attr("title",l),this.$selectButton.toggleClass(s,!e),this.$copyButton.toggleClass(s,!e),this.$deleteButton.toggleClass(s,!e)},t.BulkSelect=e}(window.slideshare_object.Clipboards),function(t){function e(){this.api=t.api,this.$document=$(document),this.clipboardId=$(o.parent).data("id"),$(o.sortableGrid).sortable({placeholderClass:"thumbnail placeholder transparent",disableIEFix:!0}).on("beforeghost",this.beforeGhost.bind(this)).on("sortstop",this.sortStop.bind(this)).on("sortstart",this.dropdownClose.bind(this)).on("sortupdate",this._onSortUpdate.bind(this))}var i={clipReordered:"clip:reordered",clipsReordered:"clips:reordered"},o={bulkSortable:".bulk-sortable",clipElements:".j-clip-thumbnail.j-clip-small",dropdown:"#clipboard-names-dropdown",listView:".j-clips-list ul",listElements:".j-clips-list li",numSelected:".num-selected",overlay:".overlay",parent:".clipboards",sortableGrid:".sortable"};e.prototype._onSortUpdate=function(e,i){this.reorderClips(e,i),t.sharePrompt.show()},e.prototype.reorderClips=function(t,e){var o,n,r=this.mapClips(),s=e.isBulk;s?n=e.items.map(function(t){return $(t.item).data()}):o=$(e.item[0]).data(),this.api.reorderClips(this.clipboardId,r).then(function(t){s?this.$document.trigger(i.clipsReordered,{clips:n,fromClipboardId:this.clipboardId}):this.$document.trigger(i.clipReordered,{clip:o,fromClipboardId:this.clipboardId})}.bind(this)),this.reorderListViews(r)},e.prototype.beforeGhost=function(e,i){var n,r;i.bulk?i.numSelected&&(n=i.numSelected.toString()+" ",n+=1===i.numSelected?t.config.I18n.clip:t.config.I18n.clips,r=$(i.item).find(o.bulkSortable),r.find(o.numSelected).text(n),r.show()):$(i.item).find(o.overlay).hide()},e.prototype.sortStop=function(t,e){e.bulk?$(e.item).find(o.bulkSortable).hide():$(e.item).find(o.overlay).show()},e.prototype.dropdownClose=function(){var t=$(o.dropdown);t.hasClass("open")&&this.$document.foundation("dropdown","close",t)},e.prototype.mapClips=function(){var t={};return $(o.clipElements).each(function(e){t[parseInt(this.getAttribute("data-id"),10)]=e}),t},e.prototype.reorderListViews=function(t){$(o.listElements).sort(function(e,i){var o=$(e).data("id"),n=$(i).data("id");return t[o]-t[n]}).appendTo(o.listView)},t.Sortable=e}(window.slideshare_object.Clipboards),function(t){function e(){this._init()}var i=t.Clipboards,o=t.is_mobile,n=t.utils.imports("ClipboardModalShare"),r=t.utils.imports("NoticePrompt"),s={parent:".clipboards",shareModal:"#clipboard-share-modal",shareWrapper:".share-prompt-wrapper",shareCTA:".share-prompt-cta"},a={promptClose:"slideshare.clips.sharePrompt.closed"};e.prototype={constructor:e,_init:function(){this.$el=$(s.shareWrapper),this.clipboard=$(s.parent).data(),this.noticePrompt=new r({selector:s.shareWrapper,onClose:this._closed.bind(this)}),this.closedByUser=this._isClosedByUser()||0,this._attachEventHandlers()},_attachEventHandlers:function(){this.$el.on("click",s.shareCTA,this._showShareModal.bind(this))},_closed:function(){this.closedByUser=1,window.localStorage.setItem(this._localStorageKey(),this.closedByUser)},_isClosedByUser:function(){return this.closedByUser=+window.localStorage.getItem(this._localStorageKey()),this.closedByUser},_localStorageKey:function(){var e=[];return e.push(a.promptClose),this.clipboard&&this.clipboard.id&&e.push("clipboard:"+this.clipboard.id),t.user&&t.user.id&&e.push("user:"+t.user.id),e.join(".")},show:function(){this._isClosedByUser()||o||this.clipboard["private"]||this.noticePrompt.show()},hide:function(){this.noticePrompt.hide()},_showShareModal:function(){var t=new n({el:s.shareModal,shareEntity:this.clipboard});t.open(),this.hide()}},i.SharePrompt=e}(window.slideshare_object),function(t){function e(e){n.api=r.imports("clips.api"),n.config=e||{},n.tracker=new t.ClippingTracker({userIsOwner:e.userIsOwner}),$(".thumbnail .j-lazy-img").lazyload({threshold:300,effect:"fadeIn"})}function i(t){t=t||{},e(t),n.headerBar=new n.HeaderBar,n.indexView=new n.IndexView,n.indexTrack=new n.IndexTrack}function o(t){t=t||{},e(t),n.actionBar=new n.ActionBar,n.headerBar=new n.HeaderBar,n.sharePrompt=new n.SharePrompt,n.clipsView=new n.ClipsView,n.clipsTrack=new n.ClipsTrack,n.bulkSelect=new n.BulkSelect,n.sortable=new n.Sortable}var n=t.Clipboards,r=t.utils;n.initIndex=i,n.initClips=o}(window.slideshare_object);